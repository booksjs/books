function booksjsLib(e){var t={};t.url=e,t.currPageNum=1,t.loadCSS=function(){let e,t,n,a=document.getElementsByTagName("head")[0];e=document.createElement("link"),(t=document.createAttribute("rel")).value="stylesheet",(n=document.createAttribute("href")).value="https://raw.githubusercontent.com/booksjs/books/master/lib/booksjs.css",a.appendChild(e)},t.loadCSS(),t.renderPage=function(e,a,s){let o=null,i=!1,l=[],c=[],r=null,d=null;e.getPage(a).then(u=>{const m=u.getViewport({scale:s.parentElement.clientWidth/u.getViewport({scale:1}).width});s.width=s.parentElement.clientWidth,s.height=1.414*s.width;const b={canvasContext:o=s.getContext("2d"),viewport:m};i?(l.push(a),c.push(s)):(i=!0,u.render(b).promise.then(()=>{i=!1,0!==l.length?(r=l.shift(),d=c.shift(),t.renderPage(e,r,d)):a===numPages&&n.bindClickEvent()}))})},t.loadDocument=async function(){let e,a,s,o,i,l,c,r,d,u,m,b,g,p=1;g=(b=await pdfjsLib.getDocument(t.url).promise).numPages,e=document.getElementsByTagName("body")[0],modalContainer=document.createElement("div"),(d=document.createAttribute("class")).value="booksjs-modal",modalContainer.setAttributeNode(d),s=document.createElement("div"),(d=document.createAttribute("class")).value="booksjs-preview",s.setAttributeNode(d);for(let e=1;e<=g;e++)p=g-e+1,r=document.createElement("div"),(d=document.createAttribute("class")).value="booksjs-page-container",(u=document.createAttribute("style")).value="z-index: "+p+";",(m=document.createAttribute("data-zindex")).value=p,r.setAttributeNode(d),r.setAttributeNode(u),r.setAttributeNode(m),a=document.createElement("div"),(d=document.createAttribute("class")).value="booksjs-page",a.setAttributeNode(d),i=document.createElement("div"),o=document.createElement("canvas"),(d=document.createAttribute("class")).value="booksjs-page-front",(m=document.createAttribute("data-page")).value=e,i.setAttributeNode(d),i.setAttributeNode(m),t.renderPage(b,e,o),e++,c=document.createElement("div"),l=document.createElement("canvas"),(m=document.createAttribute("data-page")).value=e,c.setAttributeNode(m),e<=g?((d=document.createAttribute("class")).value="booksjs-page-back",c.setAttributeNode(d),t.renderPage(b,e,l)):((d=document.createAttribute("class")).value="booksjs-page-back booksjs-page-empty",c.setAttributeNode(d)),c.appendChild(l),i.appendChild(o),a.appendChild(c),a.appendChild(i),r.appendChild(a),s.hasChildNodes()?s.insertBefore(r,s.childNodes[0]):s.appendChild(r);modalContainer.appendChild(s),e.appendChild(modalContainer),n.bindClickEvent()};var n={moveBack:function(e){e.style.zIndex=e.dataset.zindex,setTimeout(function(){e.getElementsByClassName("booksjs-page-front")[0].removeAttribute("style"),e.getElementsByClassName("booksjs-page-back")[0].removeAttribute("style")},150),setTimeout(function(){n.bindClickEvent()},800)}};return t.checkClass=function(e,t){var n=" "+t+" ";return(" "+e.className+" ").replace(/[\n\t\r]/g," ").indexOf(n)>-1},n.turnPage=function(){let e=document.getElementsByClassName("booksjs-page-container");if(t.checkClass(this,"booksjs-page-turn")){let s,o=0;for(let n=0;n<e.length;n++){if(t.checkClass(e[n],"booksjs-page-turn"))(a=parseInt(e[n].style.zIndex))>o&&(o=a,s=e[n])}s.classList.remove("booksjs-page-turn"),n.removeBindClickEvent(),n.moveBack(s),t.currPageNum--}else{let s,o=0;for(let n=0;n<e.length;n++){var a;if(!t.checkClass(e[n],"booksjs-page-turn"))(a=parseInt(e[n].style.zIndex))>o&&(o=a,s=e[n])}s.classList.add("booksjs-page-turn"),s.style.zIndex=t.currPageNum,setTimeout(function(){n.backfaceChange(s)},150),n.removeBindClickEvent(),setTimeout(function(){n.bindClickEvent()},800),t.currPageNum++}},n.removeBindClickEvent=function(){let e=document.getElementsByClassName("booksjs-page-container");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",n.turnPage)},n.bindClickEvent=function(){let e=document.getElementsByClassName("booksjs-page-container");for(let t=0;t<e.length;t++)e[t].addEventListener("click",n.turnPage)},n.backfaceChange=function(e){e.getElementsByClassName("booksjs-page-front")[0].style.backfaceVisibility="visible",e.getElementsByClassName("booksjs-page-back")[0].style.backfaceVisibility="visible",e.getElementsByClassName("booksjs-page-back")[0].style.zIndex=e.dataset.zindex},t}