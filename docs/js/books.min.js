function booksjsLib(e){var t={};t.url=e,t.currPageNum=1,t.loadCSS=function(){let e,t,n,s=document.getElementsByTagName("head")[0];e=document.createElement("link"),(t=document.createAttribute("rel")).value="stylesheet",(n=document.createAttribute("href")).value="https://booksjs.github.io/books/css/booksjs.css",e.setAttributeNode(t),e.setAttributeNode(n),s.appendChild(e)},t.loadCSS(),t.renderPage=function(e,s,a,o){let i=null,l=!1,c=[],r=[],d=null,u=null;e.getPage(a).then(m=>{const b=m.getViewport({scale:s.parentElement.clientWidth/m.getViewport({scale:1}).width});s.width=s.parentElement.clientWidth,s.height=1.414*s.width;const g={canvasContext:i=s.getContext("2d"),viewport:b};l?(c.push(a),r.push(s)):(l=!0,m.render(g).promise.then(()=>{l=!1,0!==c.length?(d=c.shift(),u=r.shift(),t.renderPage(e,u,d,o)):a===o&&n.bindClickEvent()}))})},t.loadDocument=async function(){let e,s,a,o,i,l,c,r,d,u,m,b,g,p=1;g=(b=await pdfjsLib.getDocument(t.url).promise).numPages,e=document.getElementsByTagName("body")[0],modalContainer=document.createElement("div"),(d=document.createAttribute("class")).value="booksjs-modal",modalContainer.setAttributeNode(d),a=document.createElement("div"),(d=document.createAttribute("class")).value="booksjs-preview",a.setAttributeNode(d);for(let e=1;e<=g;e++)p=g-e+1,r=document.createElement("div"),(d=document.createAttribute("class")).value="booksjs-page-container",(u=document.createAttribute("style")).value="z-index: "+p+";",(m=document.createAttribute("data-zindex")).value=p,r.setAttributeNode(d),r.setAttributeNode(u),r.setAttributeNode(m),s=document.createElement("div"),(d=document.createAttribute("class")).value="booksjs-page",s.setAttributeNode(d),i=document.createElement("div"),o=document.createElement("canvas"),(d=document.createAttribute("class")).value="booksjs-page-front",(m=document.createAttribute("data-page")).value=e,i.setAttributeNode(d),i.setAttributeNode(m),t.renderPage(b,o,e,g),e++,c=document.createElement("div"),l=document.createElement("canvas"),(m=document.createAttribute("data-page")).value=e,c.setAttributeNode(m),e<=g?((d=document.createAttribute("class")).value="booksjs-page-back",c.setAttributeNode(d),t.renderPage(b,l,e,g)):((d=document.createAttribute("class")).value="booksjs-page-back booksjs-page-empty",c.setAttributeNode(d)),c.appendChild(l),i.appendChild(o),s.appendChild(c),s.appendChild(i),r.appendChild(s),a.hasChildNodes()?a.insertBefore(r,a.childNodes[0]):a.appendChild(r);modalContainer.appendChild(a),e.appendChild(modalContainer),n.bindClickEvent(),n.closeBindClickEvent()};var n={moveBack:function(e){e.style.zIndex=e.dataset.zindex,setTimeout(function(){e.getElementsByClassName("booksjs-page-front")[0].removeAttribute("style"),e.getElementsByClassName("booksjs-page-back")[0].removeAttribute("style")},150),setTimeout(function(){n.bindClickEvent()},800)}};return t.checkClass=function(e,t){var n=" "+t+" ";return(" "+e.className+" ").replace(/[\n\t\r]/g," ").indexOf(n)>-1},n.turnPage=function(){let e=document.getElementsByClassName("booksjs-page-container");if(t.checkClass(this,"booksjs-page-turn")){let a,o=0;for(let n=0;n<e.length;n++){if(t.checkClass(e[n],"booksjs-page-turn"))(s=parseInt(e[n].style.zIndex))>o&&(o=s,a=e[n])}a.classList.remove("booksjs-page-turn"),n.removeBindClickEvent(),n.moveBack(a),t.currPageNum--}else{let a,o=0;for(let n=0;n<e.length;n++){var s;if(!t.checkClass(e[n],"booksjs-page-turn"))(s=parseInt(e[n].style.zIndex))>o&&(o=s,a=e[n])}a.classList.add("booksjs-page-turn"),a.style.zIndex=t.currPageNum,setTimeout(function(){n.backfaceChange(a)},150),n.removeBindClickEvent(),setTimeout(function(){n.bindClickEvent()},800),t.currPageNum++}},n.removeBindClickEvent=function(){let e=document.getElementsByClassName("booksjs-page-container");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",n.turnPage)},n.bindClickEvent=function(){let e=document.getElementsByClassName("booksjs-page-container");for(let t=0;t<e.length;t++)e[t].addEventListener("click",n.turnPage)},n.backfaceChange=function(e){e.getElementsByClassName("booksjs-page-front")[0].style.backfaceVisibility="visible",e.getElementsByClassName("booksjs-page-back")[0].style.backfaceVisibility="visible",e.getElementsByClassName("booksjs-page-back")[0].style.zIndex=e.dataset.zindex},n.closeBindClickEvent=function(){let e=document.getElementsByClassName("booksjs-modal")[0],t=document.getElementsByClassName("booksjs-preview")[0];e.style.transition="all .3s ease",t.style.cursor="pointer",e.addEventListener("click",function(t){t.target==this&&(e.style.opacity="0",setTimeout(function(){e.remove()},400))})},t}